<!-- page extends to template.html -->
{% extends "template.html" %} {% block title %} Track Expenses {% endblock %}

<!-- login page content -->
{% block content %}
<h1>Track Your Expenses</h1>

<form method="POST">
  <!-- Category -->
  <div class="form-group">
    <label for="category">Category<span style="color: red">*</span></label>
    <select id="category" name="category" class="form-control" required>
      <option value="">-- Select Category --</option>
      <option value="food_drinks">Food & Drinks</option>
      <option value="shopping">Shopping</option>
      <option value="entertainment">Entertainment</option>
      <option value="transportation">Transportation</option>
      <option value="housing">Housing</option>
      <option value="other">Other</option>
    </select>
  </div>
  <br />
  <!-- expense tracker title form -->
  <label for="title">Amount ($)<span style="color: red">*</span></label>
  <input
    type="number"
    id="amount"
    name="amount"
    class="form-control"
    min="0.10"
    step="0.01"
    placeholder="eg: 4.99"
    required
  />
  <br />
  <!-- track expenses description -->
  <label for="textarea">Description (optional)</label>
  <textarea
    name="content"
    id="content"
    class="form-control"
    placeholder="Eg: Bought a pie at the Tuckshop"
  ></textarea>
  <br />

  <div align="center">
    <button class="btn btn-primary" type="submit">Add Expense</button>
  </div>
</form>

<hr />
<h2>Your Expenses</h2>

{% if expenses %}
<table class="table table-striped">
  <thead>
    <tr>
      <th>Category</th>
      <th>Amount ($)</th>
      <th>Description</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    {% for expense in expenses %}
    <tr>
      <td>{{ expense.category }}</td>
      <td>{{ "%.2f"|format(expense.amount) }}</td>
      <td>{{ expense.description or "" }}</td>
      <td>{{ expense.date_created.strftime('%Y-%m-%d') }}</td>
      <td>
        <form
          method="POST"
          action="{{ url_for('views.delete_expense', expense_id=expense.id) }}"
          style="display: inline"
        >
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No expenses recorded yet.</p>
{% endif %} {% endblock %}
