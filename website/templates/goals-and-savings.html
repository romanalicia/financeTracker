<!-- page extends to template.html -->
{% extends "template.html" %} {% block title %} Goals/Savings {% endblock %}

<!-- login page content -->
{% block content %}

<body>
  <h1>Your Financial Goals</h1>

  <button
    class="btn btn-primary"
    onclick="document.getElementById('goalForm').style.display='block'"
  >
    Make a New Goal
  </button>

  <form id="goalForm" method="POST" action="/goals-and-savings">
    <label for="title">Goal Title<span style="color: red">*</span></label>
    <input type="text" id="title" name="title" required />

    <label for="amount">Amount ($)<span style="color: red">*</span></label>
    <input type="number" id="amount" name="amount" required />

    <label for="goalDate">Goal Date<span style="color: red">*</span></label>
    <input type="date" id="goalDate" name="goalDate" required />

    <script>
      // Get today's date + 1 day
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);

      // Format as YYYY-MM-DD
      const yyyy = tomorrow.getFullYear();
      const mm = String(tomorrow.getMonth() + 1).padStart(2, "0"); // Months start at 0
      const dd = String(tomorrow.getDate()).padStart(2, "0");
      const minDate = `${yyyy}-${mm}-${dd}`;

      // Set it as the minimum date
      document.getElementById("goalDate").min = minDate;
    </script>

    <label for="description">Description (optional)</label>
    <textarea id="description" name="description" rows="3"></textarea>

    <button class="btn btn-primary" type="submit">Submit Goal</button>
  </form>
  <br />
  <br />

  <h1>Goals</h1>
  <div id="goals">
    {% for goals in goals %}
    <div class="card border-dark">
      <div
        class="card-header d-flex justify-content-between align-items-center"
      >
        <a href="/goals-and-savings/{{goals.user.username}}"
          >{{goals.user.username}}</a
        >
      </div>
      <div class="card-body">
        <div class="card-text">{{goals.title}}</div>
      </div>
      <div class="card-body">
        <div class="card-text">{{goals.amount}}</div>
      </div>
      <div class="card-body">
        <div class="card-text">{{goals.description}}</div>
      </div>
      <div class="card-footer text-muted">
        <div class="card-text">{{goals.date_created}}</div>
      </div>
    </div>
    {% endfor %}
  </div>
</body>

{% endblock %}
